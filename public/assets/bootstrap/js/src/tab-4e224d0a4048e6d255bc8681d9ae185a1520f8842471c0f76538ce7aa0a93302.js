import $ from"jquery";import Util from"./util";const Tab=(e=>{const t="tab",n="4.1.3",a="bs.tab",r=`.${a}`,i=".data-api",s=e.fn[t],o={HIDE:`hide${r}`,HIDDEN:`hidden${r}`,SHOW:`show${r}`,SHOWN:`shown${r}`,CLICK_DATA_API:`click${r}${i}`},l={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},d={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"};class c{constructor(e){this._element=e}static get VERSION(){return n}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&e(this._element).hasClass(l.ACTIVE)||e(this._element).hasClass(l.DISABLED))return;let t,n;const a=e(this._element).closest(d.NAV_LIST_GROUP)[0],r=Util.getSelectorFromElement(this._element);if(a){const t="UL"===a.nodeName?d.ACTIVE_UL:d.ACTIVE;n=(n=e.makeArray(e(a).find(t)))[n.length-1]}const i=e.Event(o.HIDE,{relatedTarget:this._element}),s=e.Event(o.SHOW,{relatedTarget:n});if(n&&e(n).trigger(i),e(this._element).trigger(s),s.isDefaultPrevented()||i.isDefaultPrevented())return;r&&(t=document.querySelector(r)),this._activate(this._element,a);const c=()=>{const t=e.Event(o.HIDDEN,{relatedTarget:this._element}),a=e.Event(o.SHOWN,{relatedTarget:n});e(n).trigger(t),e(this._element).trigger(a)};t?this._activate(t,t.parentNode,c):c()}dispose(){e.removeData(this._element,a),this._element=null}_activate(t,n,a){let r;const i=(r="UL"===n.nodeName?e(n).find(d.ACTIVE_UL):e(n).children(d.ACTIVE))[0],s=a&&i&&e(i).hasClass(l.FADE),o=()=>this._transitionComplete(t,i,a);if(i&&s){const t=Util.getTransitionDurationFromElement(i);e(i).one(Util.TRANSITION_END,o).emulateTransitionEnd(t)}else o()}_transitionComplete(t,n,a){if(n){e(n).removeClass(`${l.SHOW} ${l.ACTIVE}`);const t=e(n.parentNode).find(d.DROPDOWN_ACTIVE_CHILD)[0];t&&e(t).removeClass(l.ACTIVE),"tab"===n.getAttribute("role")&&n.setAttribute("aria-selected",!1)}if(e(t).addClass(l.ACTIVE),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),Util.reflow(t),e(t).addClass(l.SHOW),t.parentNode&&e(t.parentNode).hasClass(l.DROPDOWN_MENU)){const n=e(t).closest(d.DROPDOWN)[0];if(n){const t=[].slice.call(n.querySelectorAll(d.DROPDOWN_TOGGLE));e(t).addClass(l.ACTIVE)}t.setAttribute("aria-expanded",!0)}a&&a()}static _jQueryInterface(t){return this.each(function(){const n=e(this);let r=n.data(a);if(r||(r=new c(this),n.data(a,r)),"string"==typeof t){if("undefined"==typeof r[t])throw new TypeError(`No method named "${t}"`);r[t]()}})}}return e(document).on(o.CLICK_DATA_API,d.DATA_TOGGLE,function(t){t.preventDefault(),c._jQueryInterface.call(e(this),"show")}),e.fn[t]=c._jQueryInterface,e.fn[t].Constructor=c,e.fn[t].noConflict=function(){return e.fn[t]=s,c._jQueryInterface},c})($);export default Tab;